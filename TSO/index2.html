<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="utf-8"/>
    <title>Choose your path...</title>
    <link rel="stylesheet" type="text/css" href="./main.css">
	<script src="./das_noise.js"></script>
	<script src="https://preview.babylonjs.com/babylon.js"></script>
	<script src="https://preview.babylonjs.com/materialsLibrary/babylonjs.materials.min.js"></script>

	
	
</head>
<body>
<canvas id="renderCanvas"></canvas>	
<div id='version'><a href='http://github.com/Pryme8/'>v0.0.1 Â© Andrew V. Butt 2018</a></div>
</body>

<script>
TSO = function(canvas){

		this.canvas = canvas;			
		var engine = new BABYLON.Engine(canvas, true);
		this.engine = engine;

		var scene = new BABYLON.Scene(engine);
		this.scene = scene;
		scene.clearColor = new BABYLON.Color4(0, 0, 0, 0);
		
		var light = new BABYLON.HemisphericLight("hemi", new BABYLON.Vector3(0, 1, 0), scene);
        light.intensity = 0.8;
		
		var camera = new BABYLON.FreeCamera("camera1", new BABYLON.Vector3(0, 10, -10), scene);
		camera.setTarget(BABYLON.Vector3.Zero());		
		camera.attachControl(canvas, true);
		
		engine.runRenderLoop(()=>{
			scene.render(); 
		});
		
		window.addEventListener("resize",()=>{				
			engine.resize();
		}); 	
		
		this._buildTiles();
		this._buildBoard();
		
};

TSO.prototype = {
	_buildBoard : function(){
		var scene = this.scene;
		this.board = BABYLON.MeshBuilder.CreateGround("board", {subdivsions: 1, width:7, height:7}, scene);
		var tSize = 2048;
		var texture = new BABYLON.DynamicTexture('sheet', {width:tSize, height:tSize}, scene, false, 1);
		var unit = tSize/7;
		var ctx = texture._context;
		ctx.fillStyle = 'rgb(20,20,20)';
		ctx.fillRect(0,0,tSize,tSize);
		var hu = (unit/2);
		ctx.fillStyle = 'rgb(120,120,20)';
		ctx.fillRect(hu,hu,tSize-unit,tSize-unit);		
		ctx.strokeStyle = 'gray';
		ctx.lineWidth = 13;
		ctx.strokeRect(0,0,tSize,tSize);
		ctx.strokeStyle = 'maroon';
		ctx.lineWidth = 5;
			for(var y=0; y<6; y++ ){
				for(var x=0; x<6; x++ ){
					var xo = hu+(unit*x);
					var yo = hu+(unit*y);
					ctx.strokeRect(xo,yo,unit,unit);
				}
			}
			
		
		var tu = (unit/3);
		var length = 32;
		ctx.strokeStyle = 'maroon';
		ctx.lineWidth = 13;
		var skip = 2;
		for(var i = 0; i<19; i++){
			skip++;
			if(skip==3){skip=0;continue;}
			var pos = (i*tu)+hu;
			ctx.beginPath();
			//Top Bottom Lines:
			ctx.moveTo(pos, hu-(length*0.4));
			ctx.lineTo(pos, hu+(length*0.6));
			ctx.moveTo(pos, (tSize-hu)+(length*0.4));
			ctx.lineTo(pos, (tSize-hu)-(length*0.6));
			//Side Lines:
			ctx.moveTo(hu-(length*0.4), pos);
			ctx.lineTo(hu+(length*0.6), pos);
			ctx.moveTo((tSize-hu)+(length*0.4), pos);
			ctx.lineTo((tSize-hu)-(length*0.6), pos);
			
			ctx.stroke();
			
		}
		
		var noise = new dN('Simple2', 'TSURO', {frequency:0.001, amplitude:0.75, octave:6, persistence:0.9,
			output: {type:'color', values:[0.5,0.2,0.0,1]}
		});
		
		var iDat = ctx.getImageData(0,0, tSize, tSize);
		var dat = iDat.data;
		
		for(var y=0; y<iDat.height; y++){
			for(var x=0; x<iDat.width; x++){
				var v = noise.getValue({x:x, y:y});
				var id = (x*4)+(y*4*iDat.width);
				dat[id]= Math.floor((v.r*255+dat[id])*0.5);
				dat[id+1]=Math.floor((v.g*255+dat[id+1])*0.5);
				dat[id+2]=Math.floor((v.b*255+dat[id+2])*0.5)
			}
		}
		
		ctx.putImageData(iDat, 0,0);
		
		
		ctx.strokeStyle = 'white';
		ctx.lineWidth = 7;
		var skip = 2;
		for(var i = 0; i<19; i++){
			skip++;
			if(skip==3){skip=0;continue;}
			var pos = (i*tu)+hu;
			ctx.beginPath();
			//Top Bottom Lines:
			ctx.moveTo(pos, hu-(length*0.4));
			ctx.lineTo(pos, hu+(length*0.6));
			ctx.moveTo(pos, (tSize-hu)+(length*0.4));
			ctx.lineTo(pos, (tSize-hu)-(length*0.6));
			//Side Lines:
			ctx.moveTo(hu-(length*0.4), pos);
			ctx.lineTo(hu+(length*0.6), pos);
			ctx.moveTo((tSize-hu)+(length*0.4), pos);
			ctx.lineTo((tSize-hu)-(length*0.6), pos);
			
			ctx.stroke();
			
		}
		
		texture.update(true);
		
		this.board.material = new BABYLON.StandardMaterial('boardMat', scene);
		this.board.material.diffuseTexture = texture;
		
	},
	_buildTiles : function(){
		this.deck = [];
		var tArr = TSO.TILES;
		for(var i=0; i< tArr.length; i++){
			//if(i>0){this.deck[i-1].mesh.setEnabled(false);}
			var t = tArr[i];
			var tile = new TSO.TILE(t, this);
			this.deck.push(tile);
		}
	}
};

TSO.TILE = function(data, parent){
	this.ports = data.ports;
	this.direction = 'North';
	this.parent = parent;
	this.size = 512;
	this.paths = [];
	this._buildTexture();
	this._buildMesh();
};

TSO.TILE.prototype = {
	_convertLocation: function(loc){
		var size = this.size;
		var third = size/3;
		switch(loc){
			case 'NW' : 
			return {x:third, y:0};
			break;
			case 'NE' : 
			return {x:size-third, y:0};
			break;
			case 'EN' : 
			return {x:size, y:third};
			break;
			case 'ES' : 
			return {x:size, y:size-third};
			break;
			case 'SE' : 
			return {x:size-third, y:size};
			break;
			case 'SW' : 
			return {x:third, y:size};
			break;
			case 'WS' : 
			return {x:0, y:size-third};
			break;
			case 'WN' : 
			return {x:0, y:third};
			break;
		}
	},
	_buildTexture : function(){
		var size = this.size;
		var tmpCanvas = document.createElement('canvas');
		tmpCanvas.width = size, tmpCanvas.height = size;
		var ctx = tmpCanvas.getContext('2d');

		var data = ctx.getImageData(0,0, size, size);
		var _d = data.data;
		
		function gNoise(pos, seed){		
			var v = (((pos.x*seed)*(pos.y*seed))+((PHI)*(PI)))*SRT;
			return (v - Math.floor(v))*256;
		}		
		
		var rn = Math.random();
		var noise = new dN('Simple2', 'TSURO'+rn, {frequency:0.002+(0.003*rn), amplitude:0.65, octave:4, persistence:0.95,
			output: {type:'color', values:[0.8,0.4,0.0,1]}
		});
		var noiseMask = new dN('Simple2', rn, {frequency:0.0005+(0.001*rn), amplitude:1, octave:2, persistence:1});
		
		//console.log(noise);
		
		var offset = ((rn*2)-1)*size;
		
		for(var y=0; y<size; y++){
			for(var x=0; x<size; x++){
				var i = (x*4)+(y*size*4);
				//var v = gNoise({x:(x*rn)+offset, y:(y*rn)+offset}, 1);
				var v = noise.getValue({x:x+offset, y:y+offset});
				var m = noiseMask.getValue({x:x+offset, y:y+offset});
				m /= 0.865;
				//console.log(v);
				_d[i] = Math.floor((v.r*m)*255);
				_d[i+1] = Math.floor((v.g*m)*255);
				_d[i+2] =  Math.floor((v.b*m)*255);
				_d[i+3] = 255;
			}
		}
		
		ctx.putImageData(data, 0, 0);
		
		
		ctx.strokeStyle = 'white';
		ctx.lineCap = 'round';
		ctx.lineWidth = 9;
		
		var portList = Object.keys(this.ports);
		var third = size/3;		
		
		for(var  i=0; i< portList.length; i++){
			var pa = portList[i];
			var port = this.ports[pa];
			var pb = port.target;
				pa = this._convertLocation(pa);
				pb = this._convertLocation(pb);
				ctx.strokeStyle = 'maroon';
				ctx.lineCap = 'round';
				ctx.lineWidth = 17;				
				port.draw(ctx, this, pa, pb, size, third);
				if(port.lines){
				port.lines(this.parent.scene, this, {x: pa.x/size, y:pa.y/size}, {x: pb.x/size, y:pb.y/size}, 1, third/size);
				}
		};
		
		for(var  i=0; i< portList.length; i++){
			var pa = portList[i];
			var port = this.ports[pa];
			var pb = port.target;
				pa = this._convertLocation(pa);
				pb = this._convertLocation(pb);
				ctx.strokeStyle = 'white';
				ctx.lineCap = 'round';
				ctx.lineWidth = 11;
				port.draw(ctx, this, pa, pb, size, third);
		};
		
				
		
			this.iDat = ctx.getImageData(0,0, size, size);				
	}, 
	_buildMesh : function(){
		var scene = this.parent.scene;
		var mesh = BABYLON.MeshBuilder.CreateGround("tile", {subdivsions: 1, width:1, height:1}, scene);

		var texture = new BABYLON.DynamicTexture('sheet', {width:this.size, height:this.size}, scene, false, 1);
		var ctx = texture._context;
		ctx.putImageData(this.iDat, 0,0);		
		texture.update(true);
		
		mesh.material = new BABYLON.StandardMaterial("tileTexture", scene);
		mesh.material.diffuseTexture = texture;
		
		for(var i=0; i<this.paths.length; i++){
			this.paths[i].parent = mesh;
		}
			
		this.mesh = mesh;
	}
};

TSO.TILES = [
	{//1
		ports: {
		'NW' : {target :'ES', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(size*0.35,size*0.65,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(size*0.35, 0, -size*0.65);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'NE' : {target :'WN', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(pa.x,third,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pa.x, 0, -third);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'EN' : {target :'SE', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(size-third,pa.y,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(size-third, 0, -pa.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'SW' : {target :'WS', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(pa.x,pb.y,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pa.x, 0, -pb.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}}
		},
	},
	{//2
		ports: {
		'NW' : {target :'SW', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.lineTo(pb.x,pb.y);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var linePoints = [origin.add(offset), destination.add(offset)];
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'NE' : {target :'WS', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(pa.x,size*0.65,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pa.x, 0, -size*0.65);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'EN' : {target :'SE', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(pb.x,pa.y,pb.x,pa.y+third);
				ctx.lineTo(pb.x,pb.y);				
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pb.x, 0, -pa.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y+third);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				linePoints.push(new BABYLON.Vector3(pb.x, 0, -pb.y).add(offset));				
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'WN' : {target :'ES', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(size*0.35, pa.y, size*0.5, size*0.5); 
				ctx.quadraticCurveTo(size*0.65, pb.y,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(size*0.35, 0, -pa.y);
				var destination = new BABYLON.Vector3(size*0.5, 0, -size*0.5);
				var detail = 16;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				
				origin = destination;
				control = new BABYLON.Vector3(size*0.65, 0, -pb.y);
				destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				
				var lp2 = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints()
				lp2 = lp2.splice(1, lp2.length);				
				linePoints = linePoints.concat(lp2);
				//console.log(linePoints);				
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}}
		},
	},
	{//3 Curve and Line
		ports: {
		'NW' : {target :'ES', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(size*0.35, size*0.65,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(size*0.35, 0, -size*0.65);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'NE' : {target :'EN', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(pa.x,pb.y,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pa.x, 0, -pb.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'SE' : {target :'WS', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(pa.x,pb.y,pa.x-third,pb.y);
				ctx.lineTo(pb.x,pb.y);				
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pa.x, 0, -pb.y);
				var destination = new BABYLON.Vector3(pa.x-third, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				linePoints.push(new BABYLON.Vector3(pb.x, 0, -pb.y).add(offset));				
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'SW' : {target :'WN', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.lineTo(pa.x,pb.y+third);	
				ctx.quadraticCurveTo(pa.x,pb.y,pb.x,pb.y);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pa.x, 0, -pb.y);
				var destination = new BABYLON.Vector3(pa.x, 0, -pb.y-third);
				var linePoints = [origin.add(offset), destination.add(offset)];
				origin = destination;
				destination = new BABYLON.Vector3(pb.x, 0, -pb.y);				
				var detail = 32;
				linePoints = linePoints.concat((BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints());	
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}}
		},
	},
	{//4
		ports: {
		'NW' : {target :'WS', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.lineTo(pa.x,pb.y-third);	
				ctx.quadraticCurveTo(pa.x,pb.y,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pa.x, 0, -pb.y);
				var destination = new BABYLON.Vector3(pa.x, 0, -pb.y+third);
				var linePoints = [origin.add(offset), destination.add(offset)];
				origin = destination;
				destination = new BABYLON.Vector3(pb.x, 0, -pb.y);				
				var detail = 32;
				linePoints = linePoints.concat((BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints());	
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'NE' : {target :'SW', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(pa.x, size*0.35, size*0.5, size*0.5); 
				ctx.quadraticCurveTo(pb.x, size*0.65,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pa.x, 0, -size*0.35);
				var destination = new BABYLON.Vector3(size*0.5, 0, -size*0.5);
				var detail = 16;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				
				origin = destination;
				control = new BABYLON.Vector3(pb.x, 0, -size*0.65);
				destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				
				var lp2 = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints()
				lp2 = lp2.splice(1, lp2.length);				
				linePoints = linePoints.concat(lp2);
				//console.log(linePoints);				
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'EN' : {target :'WN', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.lineTo(pb.x,pb.y);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				//Straight
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var linePoints = [origin.add(offset), destination.add(offset)];
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'ES' : {target :'SE', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(pb.x,pa.y,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pb.x, 0, -pa.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		}
	},
	{//5
		ports: {
		'NW' : {target :'WN', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(pa.x,pb.y,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pa.x, 0, -pb.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'NE' : {target :'SE', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.lineTo(pb.x,pb.y);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				//Straight
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var linePoints = [origin.add(offset), destination.add(offset)];
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'EN' : {target :'SW', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(size*0.35, size*0.35,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(size*0.35, 0, -size*0.35);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'ES' : {target :'WS', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.lineTo(pb.x,pb.y);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				//Straight
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var linePoints = [origin.add(offset), destination.add(offset)];
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}}
		}
	},
	{//6 CIRCLES
		ports: {
		'NW' : {target :'NE', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.arc(size*0.5,0, (pb.x-pa.x)*0.5, 0, 1*Math.PI);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var detail = 32;
				var pieDiv = 2/detail;
				var divArray = [];
				var radius = (pb.x-pa.x)*0.5;
				var offset =  new BABYLON.Vector3(0, 0, size*0.5);
				for(var i = 0; i < detail; i++){
					divArray.push(Math.PI*(pieDiv*i));
				}
				var lineMesh= [];
				for(var i = 0; i <= 16; i++){
					lineMesh.push(new BABYLON.Vector3(
					(radius * Math.cos(divArray[i])), 0, (radius * Math.sin(divArray[i]))));
				}	

				var lineMesh = BABYLON.Mesh.CreateLines("lines", lineMesh, scene);
				lineMesh.rotation.y = Math.PI;
				lineMesh.bakeCurrentTransformIntoVertices();
				lineMesh.position.addInPlace(offset);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);				
				
		}},
		'EN' : {target :'ES', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.arc(size, size*0.5, (pb.y-pa.y)*0.5, 0*Math.PI, 1.5*Math.PI);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var detail = 32;
				var pieDiv = 2/detail;
				var divArray = [];
				var radius = (pb.y-pa.y)*0.5;
				var offset =  new BABYLON.Vector3(size*0.5, 0, 0);
				for(var i = 0; i < detail; i++){
					divArray.push(Math.PI*(pieDiv*i));
				}
				var lineMesh= [];
				for(var i = 0; i <= 16; i++){
					lineMesh.push(new BABYLON.Vector3(
					(radius * Math.cos(divArray[i])), 0, (radius * Math.sin(divArray[i]))));
				}	

				var lineMesh = BABYLON.Mesh.CreateLines("lines", lineMesh, scene);
				lineMesh.rotation.y = Math.PI*1.5;
				lineMesh.bakeCurrentTransformIntoVertices();
				lineMesh.position.addInPlace(offset);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);	
		}},
		'SE' : {target :'SW', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.arc(size*0.5,size, (pa.x-pb.x)*0.5, Math.PI, 0*Math.PI);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var detail = 32;
				var pieDiv = 2/detail;
				var divArray = [];
				var radius = (pb.x-pa.x)*0.5;
				var offset =  new BABYLON.Vector3(0, 0, -size*0.5);
				for(var i = 0; i < detail; i++){
					divArray.push(Math.PI*(pieDiv*i));
				}
				var lineMesh= [];
				for(var i = 0; i <= 16; i++){
					lineMesh.push(new BABYLON.Vector3(
					(radius * Math.cos(divArray[i])), 0, (radius * Math.sin(divArray[i]))));
				}	

				var lineMesh = BABYLON.Mesh.CreateLines("lines", lineMesh, scene);
				lineMesh.rotation.y = Math.PI;
				lineMesh.bakeCurrentTransformIntoVertices();
				lineMesh.position.addInPlace(offset);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);	
		}},
		'WS' : {target :'WN', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.arc(0, size*0.5, (pa.y-pb.y)*0.5, 1.5*Math.PI, 0.5*Math.PI);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var detail = 32;
				var pieDiv = 2/detail;
				var divArray = [];
				var radius = (pb.y-pa.y)*0.5;
				var offset =  new BABYLON.Vector3(-size*0.5, 0, 0);
				for(var i = 0; i < detail; i++){
					divArray.push(Math.PI*(pieDiv*i));
				}
				var lineMesh= [];
				for(var i = 0; i <= 16; i++){
					lineMesh.push(new BABYLON.Vector3(
					(radius * Math.cos(divArray[i])), 0, (radius * Math.sin(divArray[i]))));
				}	

				var lineMesh = BABYLON.Mesh.CreateLines("lines", lineMesh, scene);
				lineMesh.rotation.y = Math.PI*1.5;
				lineMesh.bakeCurrentTransformIntoVertices();
				lineMesh.position.addInPlace(offset);
				lineMesh.bakeCurrentTransformIntoVertices();
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);	
		}}
		}
	},
	{//7
		ports: {
		'NW' : {target :'NE', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.arc(size*0.5,0, (pb.x-pa.x)*0.5, 0, 1*Math.PI);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var detail = 32;
				var pieDiv = 2/detail;
				var divArray = [];
				var radius = (pb.x-pa.x)*0.5;
				var offset =  new BABYLON.Vector3(0, 0, size*0.5);
				for(var i = 0; i < detail; i++){
					divArray.push(Math.PI*(pieDiv*i));
				}
				var lineMesh= [];
				for(var i = 0; i <= 16; i++){
					lineMesh.push(new BABYLON.Vector3(
					(radius * Math.cos(divArray[i])), 0, (radius * Math.sin(divArray[i]))));
				}	

				var lineMesh = BABYLON.Mesh.CreateLines("lines", lineMesh, scene);
				lineMesh.rotation.y = Math.PI;
				lineMesh.bakeCurrentTransformIntoVertices();
				lineMesh.position.addInPlace(offset);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);	
		}},
		'EN' : {target :'WN', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.lineTo(pb.x,pb.y);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				//Straight
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var linePoints = [origin.add(offset), destination.add(offset)];
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'ES' : {target :'WS', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.lineTo(pb.x,pb.y);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				//Straight
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var linePoints = [origin.add(offset), destination.add(offset)];
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'SE' : {target :'SW', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.arc(size*0.5,size, (pa.x-pb.x)*0.5, Math.PI, 0*Math.PI);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var detail = 32;
				var pieDiv = 2/detail;
				var divArray = [];
				var radius = (pb.x-pa.x)*0.5;
				var offset =  new BABYLON.Vector3(0, 0, -size*0.5);
				for(var i = 0; i < detail; i++){
					divArray.push(Math.PI*(pieDiv*i));
				}
				var lineMesh= [];
				for(var i = 0; i <= 16; i++){
					lineMesh.push(new BABYLON.Vector3(
					(radius * Math.cos(divArray[i])), 0, (radius * Math.sin(divArray[i]))));
				}	

				var lineMesh = BABYLON.Mesh.CreateLines("lines", lineMesh, scene);
				lineMesh.rotation.y = Math.PI;
				lineMesh.bakeCurrentTransformIntoVertices();
				lineMesh.position.addInPlace(offset);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);	
		}}		
		}
	},
	{//8
		ports: {
		'NW' : {target :'WS', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(third,pb.y,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(third, 0, -pb.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'NE' : {target :'EN', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(pa.x,pb.y,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pa.x, 0, -pb.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'ES' : {target :'SE', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(pb.x,pa.y,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pb.x, 0, -pa.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'SW' : {target :'WN', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(third,pb.y,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(third, 0, -pb.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}}		
		}
	},
	{//9
		ports: {
		'NW' : {target :'ES', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(size*0.35,size*0.65,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(size*0.35, 0, -size*0.65);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'NE' : {target :'SE', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.lineTo(pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				//Straight
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var linePoints = [origin.add(offset), destination.add(offset)];
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'EN' : {target :'SW', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(size*0.35,size*0.35,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(size*0.35, 0, -size*0.35);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'WS' : {target :'WN', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.arc(0, size*0.5, (pa.y-pb.y)*0.5, 1.5*Math.PI, 0.5*Math.PI);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var detail = 32;
				var pieDiv = 2/detail;
				var divArray = [];
				var radius = (pb.y-pa.y)*0.5;
				var offset =  new BABYLON.Vector3(-size*0.5, 0, 0);
				for(var i = 0; i < detail; i++){
					divArray.push(Math.PI*(pieDiv*i));
				}
				var lineMesh= [];
				for(var i = 0; i <= 16; i++){
					lineMesh.push(new BABYLON.Vector3(
					(radius * Math.cos(divArray[i])), 0, (radius * Math.sin(divArray[i]))));
				}	

				var lineMesh = BABYLON.Mesh.CreateLines("lines", lineMesh, scene);
				lineMesh.rotation.y = Math.PI*1.5;
				lineMesh.bakeCurrentTransformIntoVertices();
				lineMesh.position.addInPlace(offset);
				lineMesh.bakeCurrentTransformIntoVertices();
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);	
		}}	
		}
	},
	{//10
		ports: {
		'NW' : {target :'NE', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.arc(size*0.5,0, (pb.x-pa.x)*0.5, 0, 1*Math.PI);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var detail = 32;
				var pieDiv = 2/detail;
				var divArray = [];
				var radius = (pb.x-pa.x)*0.5;
				var offset =  new BABYLON.Vector3(0, 0, size*0.5);
				for(var i = 0; i < detail; i++){
					divArray.push(Math.PI*(pieDiv*i));
				}
				var lineMesh= [];
				for(var i = 0; i <= 16; i++){
					lineMesh.push(new BABYLON.Vector3(
					(radius * Math.cos(divArray[i])), 0, (radius * Math.sin(divArray[i]))));
				}	

				var lineMesh = BABYLON.Mesh.CreateLines("lines", lineMesh, scene);
				lineMesh.rotation.y = Math.PI;
				lineMesh.bakeCurrentTransformIntoVertices();
				lineMesh.position.addInPlace(offset);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);	
		}},
		'EN' : {target :'WS', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(size*0.65, pa.y, size*0.5, size*0.5); 
				ctx.quadraticCurveTo(size*0.35, pb.y,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(size*0.65, 0, -pa.y);
				var destination = new BABYLON.Vector3(size*0.5, 0, -size*0.5);
				var detail = 16;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				origin = destination;
				control = new BABYLON.Vector3(size*0.35, 0, -pb.y);
				destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var lp2 = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints()
				lp2 = lp2.splice(1, lp2.length);				
				linePoints = linePoints.concat(lp2);
				//console.log(linePoints);				
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
				
				
		}},
		'SE' : {target :'SW', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.arc(size*0.5,size, (pa.x-pb.x)*0.5, Math.PI, 0*Math.PI);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var detail = 32;
				var pieDiv = 2/detail;
				var divArray = [];
				var radius = (pb.x-pa.x)*0.5;
				var offset =  new BABYLON.Vector3(0, 0, -size*0.5);
				for(var i = 0; i < detail; i++){
					divArray.push(Math.PI*(pieDiv*i));
				}
				var lineMesh= [];
				for(var i = 0; i <= 16; i++){
					lineMesh.push(new BABYLON.Vector3(
					(radius * Math.cos(divArray[i])), 0, (radius * Math.sin(divArray[i]))));
				}	

				var lineMesh = BABYLON.Mesh.CreateLines("lines", lineMesh, scene);
				lineMesh.rotation.y = Math.PI;
				lineMesh.bakeCurrentTransformIntoVertices();
				lineMesh.position.addInPlace(offset);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);	
		}},
		'WN' : {target :'ES', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(size*0.35, pa.y, size*0.5, size*0.5); 
				ctx.quadraticCurveTo(size*0.65, pb.y,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(size*0.35, 0, -pa.y);
				var destination = new BABYLON.Vector3(size*0.5, 0, -size*0.5);
				var detail = 16;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				origin = destination;
				control = new BABYLON.Vector3(size*0.65, 0, -pb.y);
				destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var lp2 = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints()
				lp2 = lp2.splice(1, lp2.length);				
				linePoints = linePoints.concat(lp2);
				//console.log(linePoints);				
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}}		
		}
	},
	{//11
		ports: {
		'NW' : {target :'NE', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.arc(size*0.5,0, (pb.x-pa.x)*0.5, 0, 1*Math.PI);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var detail = 32;
				var pieDiv = 2/detail;
				var divArray = [];
				var radius = (pb.x-pa.x)*0.5;
				var offset =  new BABYLON.Vector3(0, 0, size*0.5);
				for(var i = 0; i < detail; i++){
					divArray.push(Math.PI*(pieDiv*i));
				}
				var lineMesh= [];
				for(var i = 0; i <= 16; i++){
					lineMesh.push(new BABYLON.Vector3(
					(radius * Math.cos(divArray[i])), 0, (radius * Math.sin(divArray[i]))));
				}	

				var lineMesh = BABYLON.Mesh.CreateLines("lines", lineMesh, scene);
				lineMesh.rotation.y = Math.PI;
				lineMesh.bakeCurrentTransformIntoVertices();
				lineMesh.position.addInPlace(offset);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);				
				
		}},
		'EN' : {target :'WN', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.lineTo(pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var linePoints = [origin.add(offset), destination.add(offset)];
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'ES' : {target :'SW', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(pb.x,size*0.65,pb.x,pb.y); 
				ctx.stroke();				
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pb.x, 0, -size*0.65);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'SE' : {target :'WS', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(pa.x,size*0.65,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pa.x, 0, -size*0.65);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}}	
		}
	},
	{//12 Cubic Bezier / Curve Line Curve
		ports: {
		'NW' : {target :'ES', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				var _to = third*0.5;
				ctx.quadraticCurveTo(pa.x,_to,pa.x+_to,pa.y+third);
				ctx.lineTo(size-third,pb.y-_to);
				ctx.quadraticCurveTo(size-_to, pb.y , pb.x, pb.y);				
				ctx.stroke();	
		},
		lines : (scene, self, pa, pb, size, third)=>{		
				var _to = third*0.5;				
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pa.x, 0, -_to);
				var destination = new BABYLON.Vector3(pa.x+_to, 0, -pa.y-third);
				var detail = 16;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				
				origin = new BABYLON.Vector3(size-third, 0, -pb.y+_to);
				control = new BABYLON.Vector3(size-_to, 0, -pb.y);
				destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var lp2 = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints()
				lp2 = lp2.splice(1, lp2.length);				
				linePoints = linePoints.concat(lp2);
				//console.log(linePoints);*/				
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'NE' : {target :'SW', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				var _to = third*0.5;
				ctx.bezierCurveTo(pa.x, pa.y+third, size*0.5-_to, (size*0.5)-third, size*0.5,size*0.5);
				ctx.bezierCurveTo(size*0.5+_to,(size*0.5)+third, pb.x,pb.y-third, pb.x,pb.y);				
				ctx.stroke();	
		},
		lines : (scene, self, pa, pb, size, third)=>{
				//Cubic Bezier		
				var _to = third*0.5;
				
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control1 = new BABYLON.Vector3(pa.x, 0, -pa.y-third);
				var control2 = new BABYLON.Vector3(size*0.5-_to, 0, (-size*0.5)+third);
				var destination = new BABYLON.Vector3(size*0.5, 0, -size*0.5);
				var detail = 16;
				var linePoints = (BABYLON.Curve3.CreateCubicBezier
					(
						origin.add(offset),
						control1.add(offset),
						control2.add(offset),
						destination.add(offset),
						detail
					)
				).getPoints();
				
				origin = new BABYLON.Vector3(size*0.5, 0, -size*0.5);
				control1 = new BABYLON.Vector3(size*0.5+_to, 0, (-size*0.5)-third);
				control2 = new BABYLON.Vector3(pb.x, 0, -pb.y+third);
				destination = new BABYLON.Vector3(pb.x, 0, -pb.y);				
				
				var lp2 = (BABYLON.Curve3.CreateCubicBezier
					(
						origin.add(offset),
						control1.add(offset),
						control2.add(offset),
						destination.add(offset),
						detail
					)
				).getPoints();
				lp2 = lp2.splice(1, lp2.length);				
				linePoints = linePoints.concat(lp2);
						
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'EN' : {target :'WS', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				var _to = third*0.5;
				ctx.bezierCurveTo(pa.x-third, pa.y, size*0.5+third,(size*0.5)+_to, size*0.5,size*0.5);
				ctx.bezierCurveTo(size*0.5-third,(size*0.5)-_to, pb.x+third, pb.y, pb.x, pb.y);				
				ctx.stroke();				
		},
		lines : (scene, self, pa, pb, size, third)=>{
				//Cubic Bezier		
				var _to = third*0.5;
				
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control1 = new BABYLON.Vector3(pa.x-third, 0, -pa.y);
				var control2 = new BABYLON.Vector3((size*0.5)+third, 0, (-size*0.5)-_to);
				var destination = new BABYLON.Vector3(size*0.5, 0, -size*0.5);
				var detail = 16;
				var linePoints = (BABYLON.Curve3.CreateCubicBezier
					(
						origin.add(offset),
						control1.add(offset),
						control2.add(offset),
						destination.add(offset),
						detail
					)
				).getPoints();
				
				origin = new BABYLON.Vector3(size*0.5, 0, -size*0.5);
				control1 = new BABYLON.Vector3(size*0.5-third, 0, -(size*0.5)+_to);
				control2 = new BABYLON.Vector3(pb.x+third, 0, -pb.y);
				destination = new BABYLON.Vector3(pb.x, 0, -pb.y);				
				
				var lp2 = (BABYLON.Curve3.CreateCubicBezier
					(
						origin.add(offset),
						control1.add(offset),
						control2.add(offset),
						destination.add(offset),
						detail
					)
				).getPoints();
				lp2 = lp2.splice(1, lp2.length);				
				linePoints = linePoints.concat(lp2);
						
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'SE' : {target :'WN', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				var _to = third*0.5;
				ctx.quadraticCurveTo(pa.x,size-_to,pa.x-_to,pa.y-third);
				ctx.lineTo(third,pb.y+_to);
				ctx.quadraticCurveTo(_to, pb.y , pb.x, pb.y);				
				ctx.stroke();	
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var _to = third*0.5;
				
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pa.x, 0, -size+_to);
				var destination = new BABYLON.Vector3(pa.x-_to, 0, -pa.y+third);
				var detail = 16;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				
				origin = new BABYLON.Vector3(third, 0, -pb.y-_to);
				control = new BABYLON.Vector3(_to, 0, -pb.y);
				destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var lp2 = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints()
				lp2 = lp2.splice(1, lp2.length);				
				linePoints = linePoints.concat(lp2);
				//console.log(linePoints);*/				
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}}		
		}
	},
	{//13
		ports: {
		'NW' : {target :'WS', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.lineTo(pa.x,pb.y-third);	
				ctx.quadraticCurveTo(pa.x,pb.y,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pa.x, 0, -pb.y);
				var destination = new BABYLON.Vector3(pa.x, 0, -pb.y+third);
				var linePoints = [origin.add(offset), destination.add(offset)];
				origin = destination;
				destination = new BABYLON.Vector3(pb.x, 0, -pb.y);				
				var detail = 32;
				linePoints = linePoints.concat((BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints());	
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'NE' : {target :'WN', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pb.x,pb.y);
				ctx.lineTo(pa.x-third,pb.y);	
				ctx.quadraticCurveTo(pa.x,pb.y,pa.x,pa.y); 
				ctx.stroke();	
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var control = new BABYLON.Vector3(pa.x, 0, -pb.y);
				var destination = new BABYLON.Vector3(pa.x-third, 0, -pb.y);
				var linePoints = [origin.add(offset), destination.add(offset)];
				origin = destination;
				destination = new BABYLON.Vector3(pa.x, 0, -pa.y);				
				var detail = 32;
				linePoints = linePoints.concat((BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints());	
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'EN' : {target :'ES', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.arc(size, size*0.5, (pb.y-pa.y)*0.5, 0*Math.PI, 1.5*Math.PI);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var detail = 32;
				var pieDiv = 2/detail;
				var divArray = [];
				var radius = (pb.y-pa.y)*0.5;
				var offset =  new BABYLON.Vector3(size*0.5, 0, 0);
				for(var i = 0; i < detail; i++){
					divArray.push(Math.PI*(pieDiv*i));
				}
				var lineMesh= [];
				for(var i = 0; i <= 16; i++){
					lineMesh.push(new BABYLON.Vector3(
					(radius * Math.cos(divArray[i])), 0, (radius * Math.sin(divArray[i]))));
				}	

				var lineMesh = BABYLON.Mesh.CreateLines("lines", lineMesh, scene);
				lineMesh.rotation.y = Math.PI*1.5;
				lineMesh.bakeCurrentTransformIntoVertices();
				lineMesh.position.addInPlace(offset);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);	
		}},
		'SE' : {target :'SW', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.arc(size*0.5,size, (pa.x-pb.x)*0.5, Math.PI, 0*Math.PI);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var detail = 32;
				var pieDiv = 2/detail;
				var divArray = [];
				var radius = (pb.x-pa.x)*0.5;
				var offset =  new BABYLON.Vector3(0, 0, -size*0.5);
				for(var i = 0; i < detail; i++){
					divArray.push(Math.PI*(pieDiv*i));
				}
				var lineMesh= [];
				for(var i = 0; i <= 16; i++){
					lineMesh.push(new BABYLON.Vector3(
					(radius * Math.cos(divArray[i])), 0, (radius * Math.sin(divArray[i]))));
				}	

				var lineMesh = BABYLON.Mesh.CreateLines("lines", lineMesh, scene);
				lineMesh.rotation.y = Math.PI;
				lineMesh.bakeCurrentTransformIntoVertices();
				lineMesh.position.addInPlace(offset);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);	
		}}	
		}
	},
	{//14
		ports: {
		'NW' : {target :'NE', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.arc(size*0.5,0, (pb.x-pa.x)*0.5, 0, 1*Math.PI);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var detail = 32;
				var pieDiv = 2/detail;
				var divArray = [];
				var radius = (pb.x-pa.x)*0.5;
				var offset =  new BABYLON.Vector3(0, 0, size*0.5);
				for(var i = 0; i < detail; i++){
					divArray.push(Math.PI*(pieDiv*i));
				}
				var lineMesh= [];
				for(var i = 0; i <= 16; i++){
					lineMesh.push(new BABYLON.Vector3(
					(radius * Math.cos(divArray[i])), 0, (radius * Math.sin(divArray[i]))));
				}	

				var lineMesh = BABYLON.Mesh.CreateLines("lines", lineMesh, scene);
				lineMesh.rotation.y = Math.PI;
				lineMesh.bakeCurrentTransformIntoVertices();
				lineMesh.position.addInPlace(offset);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'EN' : {target :'WN', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.lineTo(pb.x,pb.y);
				ctx.stroke();	
		},
		lines : (scene, self, pa, pb, size, third)=>{
				//Straight
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var linePoints = [origin.add(offset), destination.add(offset)];
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'ES' : {target :'SE', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(pb.x,pa.y,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pb.x, 0, -pa.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'SW' : {target :'WS', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(pa.x,pb.y,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pa.x, 0, -pb.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}}
		}
	},
	{//15
		ports: {
		'NW' : {target :'WS', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.lineTo(pa.x,pb.y-third);	
				ctx.quadraticCurveTo(pa.x,pb.y,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pa.x, 0, -pb.y);
				var destination = new BABYLON.Vector3(pa.x, 0, -pb.y+third);
				var linePoints = [origin.add(offset), destination.add(offset)];
				origin = destination;
				destination = new BABYLON.Vector3(pb.x, 0, -pb.y);				
				var detail = 32;
				linePoints = linePoints.concat((BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints());	
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'NE' : {target :'WN', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pb.x,pb.y);
				ctx.lineTo(pa.x-third,pb.y);	
				ctx.quadraticCurveTo(pa.x,pb.y,pa.x,pa.y); 
				ctx.stroke();	
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var control = new BABYLON.Vector3(pa.x, 0, -pb.y);
				var destination = new BABYLON.Vector3(pa.x-third, 0, -pb.y);
				var linePoints = [origin.add(offset), destination.add(offset)];
				origin = destination;
				destination = new BABYLON.Vector3(pa.x, 0, -pa.y);				
				var detail = 32;
				linePoints = linePoints.concat((BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints());	
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'EN' : {target :'SE', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pb.x,pb.y);
				ctx.lineTo(pb.x,pa.y+third);	
				ctx.quadraticCurveTo(pb.x,pa.y,pa.x,pa.y); 
				ctx.stroke();	
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var control = new BABYLON.Vector3(pb.x, 0, -pa.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pa.y-third);
				var linePoints = [origin.add(offset), destination.add(offset)];
				origin = destination;
				destination = new BABYLON.Vector3(pa.x, 0, -pa.y);				
				var detail = 32;
				linePoints = linePoints.concat((BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints());	
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'ES' : {target :'SW', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.lineTo(pb.x+third,pa.y);	
				ctx.quadraticCurveTo(pb.x,pa.y,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pb.x, 0, -pa.y);
				var destination = new BABYLON.Vector3(pb.x+third, 0, -pa.y);
				var linePoints = [origin.add(offset), destination.add(offset)];
				origin = destination;
				destination = new BABYLON.Vector3(pb.x, 0, -pb.y);				
				var detail = 32;
				linePoints = linePoints.concat((BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints());	
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}}	
		}
	},
	{//16 bezierCurveTo Single
		ports: {
		'NW' : {target :'SE', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.bezierCurveTo(pa.x,size*0.65,pb.x,size*0.35,pb.x,pb.y);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control1 = new BABYLON.Vector3(pa.x, 0, -size*0.65);
				var control2 = new BABYLON.Vector3(pb.x, 0, -size*0.35);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 16;
				var linePoints = (BABYLON.Curve3.CreateCubicBezier
					(
						origin.add(offset),
						control1.add(offset),
						control2.add(offset),
						destination.add(offset),
						detail
					)
				).getPoints();
										
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'NE' : {target :'SW', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.bezierCurveTo(pa.x,size*0.65,pb.x,size*0.35,pb.x,pb.y);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control1 = new BABYLON.Vector3(pa.x, 0, -size*0.65);
				var control2 = new BABYLON.Vector3(pb.x, 0, -size*0.35);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 16;
				var linePoints = (BABYLON.Curve3.CreateCubicBezier
					(
						origin.add(offset),
						control1.add(offset),
						control2.add(offset),
						destination.add(offset),
						detail
					)
				).getPoints();
										
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'EN' : {target :'WS', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.bezierCurveTo(size*0.35, pa.y, size*0.65, pb.y , pb.x, pb.y);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control1 = new BABYLON.Vector3(size*0.35, 0, -pa.y);
				var control2 = new BABYLON.Vector3(size*0.65, 0, -pb.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 16;
				var linePoints = (BABYLON.Curve3.CreateCubicBezier
					(
						origin.add(offset),
						control1.add(offset),
						control2.add(offset),
						destination.add(offset),
						detail
					)
				).getPoints();
										
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'ES' : {target :'WN', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.bezierCurveTo(size*0.35, pa.y, size*0.65, pb.y , pb.x, pb.y);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control1 = new BABYLON.Vector3(size*0.35, 0, -pa.y);
				var control2 = new BABYLON.Vector3(size*0.65, 0, -pb.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 16;
				var linePoints = (BABYLON.Curve3.CreateCubicBezier
					(
						origin.add(offset),
						control1.add(offset),
						control2.add(offset),
						destination.add(offset),
						detail
					)
				).getPoints();
										
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}}
		}
	},
	{//17
		ports: {
		'NW' : {target :'WN', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(pa.x,pb.y,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pa.x, 0, -pb.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'NE' : {target :'WS', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(size*0.65,size*0.65,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(size*0.65, 0, -size*0.65);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'EN' : {target :'ES', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.arc(size, size*0.5, (pb.y-pa.y)*0.5, 0*Math.PI, 1.5*Math.PI);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var detail = 32;
				var pieDiv = 2/detail;
				var divArray = [];
				var radius = (pb.y-pa.y)*0.5;
				var offset =  new BABYLON.Vector3(size*0.5, 0, 0);
				for(var i = 0; i < detail; i++){
					divArray.push(Math.PI*(pieDiv*i));
				}
				var lineMesh= [];
				for(var i = 0; i <= 16; i++){
					lineMesh.push(new BABYLON.Vector3(
					(radius * Math.cos(divArray[i])), 0, (radius * Math.sin(divArray[i]))));
				}	

				var lineMesh = BABYLON.Mesh.CreateLines("lines", lineMesh, scene);
				lineMesh.rotation.y = Math.PI*1.5;
				lineMesh.bakeCurrentTransformIntoVertices();
				lineMesh.position.addInPlace(offset);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'SE' : {target :'SW', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.arc(size*0.5,size, (pa.x-pb.x)*0.5, Math.PI, 0*Math.PI);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var detail = 32;
				var pieDiv = 2/detail;
				var divArray = [];
				var radius = (pb.x-pa.x)*0.5;
				var offset =  new BABYLON.Vector3(0, 0, -size*0.5);
				for(var i = 0; i < detail; i++){
					divArray.push(Math.PI*(pieDiv*i));
				}
				var lineMesh= [];
				for(var i = 0; i <= 16; i++){
					lineMesh.push(new BABYLON.Vector3(
					(radius * Math.cos(divArray[i])), 0, (radius * Math.sin(divArray[i]))));
				}	

				var lineMesh = BABYLON.Mesh.CreateLines("lines", lineMesh, scene);
				lineMesh.rotation.y = Math.PI;
				lineMesh.bakeCurrentTransformIntoVertices();
				lineMesh.position.addInPlace(offset);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);	
		}}
		}
	},
	{//18
		ports: {
		'NW' : {target :'EN', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pb.x,pb.y);
				ctx.lineTo(pa.x+third,pb.y);	
				ctx.quadraticCurveTo(pa.x,pb.y,pa.x,pa.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var control = new BABYLON.Vector3(pa.x, 0, -pb.y);
				var destination = new BABYLON.Vector3(pa.x+third, 0, -pb.y);
				var linePoints = [origin.add(offset), destination.add(offset)];
				origin = destination;
				destination = new BABYLON.Vector3(pa.x, 0, -pa.y);				
				var detail = 32;
				linePoints = linePoints.concat((BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints());	
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'NE' : {target :'SW', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.bezierCurveTo(pa.x,size*0.65,pb.x,size*0.35,pb.x,pb.y);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control1 = new BABYLON.Vector3(pa.x, 0, -size*0.65);
				var control2 = new BABYLON.Vector3(pb.x, 0, -size*0.35);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 16;
				var linePoints = (BABYLON.Curve3.CreateCubicBezier
					(
						origin.add(offset),
						control1.add(offset),
						control2.add(offset),
						destination.add(offset),
						detail
					)
				).getPoints();
										
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'ES' : {target :'WN', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.bezierCurveTo(size*0.65, pa.y, size*0.35, pb.y , pb.x, pb.y);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control1 = new BABYLON.Vector3(size*0.65, 0, -pa.y);
				var control2 = new BABYLON.Vector3(size*0.35, 0, -pb.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 16;
				var linePoints = (BABYLON.Curve3.CreateCubicBezier
					(
						origin.add(offset),
						control1.add(offset),
						control2.add(offset),
						destination.add(offset),
						detail
					)
				).getPoints();
										
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'SE' : {target :'WS', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pb.x,pb.y);
				ctx.lineTo(pa.x-third,pb.y);	
				ctx.quadraticCurveTo(pa.x,pb.y,pa.x,pa.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var control = new BABYLON.Vector3(pa.x, 0, -pb.y);
				var destination = new BABYLON.Vector3(pa.x-third, 0, -pb.y);
				var linePoints = [origin.add(offset), destination.add(offset)];
				origin = destination;
				destination = new BABYLON.Vector3(pa.x, 0, -pa.y);				
				var detail = 32;
				linePoints = linePoints.concat((BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints());	
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}}
		}
	},
	{//19
		ports: {
		'NW' : {target :'SE', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.bezierCurveTo(pa.x,size*0.85,pb.x,size*0.45,pb.x,pb.y);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control1 = new BABYLON.Vector3(pa.x, 0, -size*0.85);
				var control2 = new BABYLON.Vector3(pb.x, 0, -size*0.45);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 16;
				var linePoints = (BABYLON.Curve3.CreateCubicBezier
					(
						origin.add(offset),
						control1.add(offset),
						control2.add(offset),
						destination.add(offset),
						detail
					)
				).getPoints();
										
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'NE' : {target :'EN', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(pa.x,pb.y,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pa.x, 0, -pb.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'ES' : {target :'WN', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.bezierCurveTo(size*0.45, pa.y, size*0.85, pb.y , pb.x, pb.y);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control1 = new BABYLON.Vector3(size*0.45, 0, -pa.y);
				var control2 = new BABYLON.Vector3(size*0.85, 0, -pb.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 16;
				var linePoints = (BABYLON.Curve3.CreateCubicBezier
					(
						origin.add(offset),
						control1.add(offset),
						control2.add(offset),
						destination.add(offset),
						detail
					)
				).getPoints();
										
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'SW' : {target :'WS', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(pa.x,pb.y,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pa.x, 0, -pb.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}}
		}
	},
	{//20
		ports: {
		'NW' : {target :'ES', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(size*0.4,size*0.6,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(size*0.4, 0, -size*0.6);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'NE' : {target :'EN', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(pa.x,pb.y,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pa.x, 0, -pb.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'SE' : {target :'WN', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(size*0.6,size*0.4,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(size*0.6, 0, -size*0.4);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'SW' : {target :'WS', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(pa.x,pb.y,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pa.x, 0, -pb.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}}
		}
	},
	{//21
		ports: {
		'NW' : {target :'ES', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(size*0.35,size*0.65,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pa.x, 0, -pb.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'NE' : {target :'WN', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(pa.x,pb.y,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pa.x, 0, -pb.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'EN' : {target :'SW', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pb.x,pb.y);
				ctx.quadraticCurveTo(size*0.35,size*0.35,pa.x,pa.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var control = new BABYLON.Vector3(size*0.35, 0, -size*0.35);
				var destination = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'SE' : {target :'WS', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(pa.x,pb.y,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pa.x, 0, -pb.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}}
		}
	},
	{//22
		ports: {
		'NW' : {target :'SE', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.bezierCurveTo(pa.x,size*0.65,pb.x,size*0.35,pb.x,pb.y);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control1 = new BABYLON.Vector3(pa.x, 0, -size*0.65);
				var control2 = new BABYLON.Vector3(pb.x, 0, -size*0.35);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 16;
				var linePoints = (BABYLON.Curve3.CreateCubicBezier
					(
						origin.add(offset),
						control1.add(offset),
						control2.add(offset),
						destination.add(offset),
						detail
					)
				).getPoints();
										
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'NE' : {target :'ES', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x, pa.y);
				ctx.lineTo(pa.x,pb.y-third);	
				ctx.quadraticCurveTo(pa.x,pb.y,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pa.x, 0, -pb.y);
				var destination = new BABYLON.Vector3(pa.x, 0, -pb.y+third);
				var linePoints = [origin.add(offset), destination.add(offset)];
				origin = destination;
				destination = new BABYLON.Vector3(pb.x, 0, -pb.y);				
				var detail = 32;
				linePoints = linePoints.concat((BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints());	
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'EN' : {target :'SW', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pb.x,pb.y);
				ctx.quadraticCurveTo(size*0.35,size*0.35,pa.x,pa.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var control = new BABYLON.Vector3(size*0.35, 0, -size*0.35);
				var destination = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
				
		}},
		'WS' : {target :'WN', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.arc(0, size*0.5, (pa.y-pb.y)*0.5, 1.5*Math.PI, 0.5*Math.PI);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var detail = 32;
				var pieDiv = 2/detail;
				var divArray = [];
				var radius = (pb.y-pa.y)*0.5;
				var offset =  new BABYLON.Vector3(-size*0.5, 0, 0);
				for(var i = 0; i < detail; i++){
					divArray.push(Math.PI*(pieDiv*i));
				}
				var lineMesh= [];
				for(var i = 0; i <= 16; i++){
					lineMesh.push(new BABYLON.Vector3(
					(radius * Math.cos(divArray[i])), 0, (radius * Math.sin(divArray[i]))));
				}	

				var lineMesh = BABYLON.Mesh.CreateLines("lines", lineMesh, scene);
				lineMesh.rotation.y = Math.PI*1.5;
				lineMesh.bakeCurrentTransformIntoVertices();
				lineMesh.position.addInPlace(offset);
				lineMesh.bakeCurrentTransformIntoVertices();
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}}
		}
	},
	{//23
		ports: {
		'NW' : {target :'EN', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pb.x,pb.y);
				ctx.lineTo(pa.x+third,pb.y);	
				ctx.quadraticCurveTo(pa.x,pb.y,pa.x,pa.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var control = new BABYLON.Vector3(pa.x, 0, -pb.y);
				var destination = new BABYLON.Vector3(pa.x+third, 0, -pb.y);
				var linePoints = [origin.add(offset), destination.add(offset)];
				origin = destination;
				destination = new BABYLON.Vector3(pa.x, 0, -pa.y);				
				var detail = 32;
				linePoints = linePoints.concat((BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints());	
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'NE' : {target :'SE', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x, pa.y);
				ctx.lineTo(pb.x,pb.y);	
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				//Straight
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var linePoints = [origin.add(offset), destination.add(offset)];
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'ES' : {target :'WS', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x, pa.y);
				ctx.lineTo(pb.x,pb.y);	
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				//Straight
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var linePoints = [origin.add(offset), destination.add(offset)];
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'SW' : {target :'WN', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.lineTo(pa.x, pb.y+third);	
				ctx.quadraticCurveTo(pa.x, pb.y,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pa.x, 0, -pb.y);
				var destination = new BABYLON.Vector3(pa.x, 0, -pb.y-third);
				var linePoints = [origin.add(offset), destination.add(offset)];
				origin = destination;
				destination = new BABYLON.Vector3(pb.x, 0, -pb.y);				
				var detail = 32;
				linePoints = linePoints.concat((BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints());	
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}}
		}
	},
	{//24
		ports: {
		'NW' : {target :'SW', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x, pa.y);
				ctx.lineTo(pb.x,pb.y);	
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				//Straight
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var linePoints = [origin.add(offset), destination.add(offset)];
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'NE' : {target :'SE', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x, pa.y);
				ctx.lineTo(pb.x,pb.y);	
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				//Straight
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var linePoints = [origin.add(offset), destination.add(offset)];
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'EN' : {target :'WS', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.bezierCurveTo(size*0.35, pa.y, size*0.65, pb.y , pb.x, pb.y);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control1 = new BABYLON.Vector3(size*0.35, 0, -pa.y);
				var control2 = new BABYLON.Vector3(size*0.65, 0, -pb.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 16;
				var linePoints = (BABYLON.Curve3.CreateCubicBezier
					(
						origin.add(offset),
						control1.add(offset),
						control2.add(offset),
						destination.add(offset),
						detail
					)
				).getPoints();
										
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'ES' : {target :'WN', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.bezierCurveTo(size*0.35, pa.y, size*0.65, pb.y , pb.x, pb.y);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control1 = new BABYLON.Vector3(size*0.35, 0, -pa.y);
				var control2 = new BABYLON.Vector3(size*0.65, 0, -pb.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 16;
				var linePoints = (BABYLON.Curve3.CreateCubicBezier
					(
						origin.add(offset),
						control1.add(offset),
						control2.add(offset),
						destination.add(offset),
						detail
					)
				).getPoints();
										
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}}
		}
	},
	{//25
		ports: {
		'NW' : {target :'NE', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.arc(size*0.5,0, (pb.x-pa.x)*0.5, 0, 1*Math.PI);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var detail = 32;
				var pieDiv = 2/detail;
				var divArray = [];
				var radius = (pb.x-pa.x)*0.5;
				var offset =  new BABYLON.Vector3(0, 0, size*0.5);
				for(var i = 0; i < detail; i++){
					divArray.push(Math.PI*(pieDiv*i));
				}
				var lineMesh= [];
				for(var i = 0; i <= 16; i++){
					lineMesh.push(new BABYLON.Vector3(
					(radius * Math.cos(divArray[i])), 0, (radius * Math.sin(divArray[i]))));
				}	

				var lineMesh = BABYLON.Mesh.CreateLines("lines", lineMesh, scene);
				lineMesh.rotation.y = Math.PI;
				lineMesh.bakeCurrentTransformIntoVertices();
				lineMesh.position.addInPlace(offset);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'EN' : {target :'SW', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(size*0.35, size*0.35,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(size*0.35, 0, -size*0.35);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'ES' : {target :'WN', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.bezierCurveTo(size*0.35, pa.y, size*0.65, pb.y , pb.x, pb.y);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control1 = new BABYLON.Vector3(size*0.35, 0, -pa.y);
				var control2 = new BABYLON.Vector3(size*0.65, 0, -pb.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 16;
				var linePoints = (BABYLON.Curve3.CreateCubicBezier
					(
						origin.add(offset),
						control1.add(offset),
						control2.add(offset),
						destination.add(offset),
						detail
					)
				).getPoints();
										
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'SE' : {target :'WS', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pb.x,pb.y);
				ctx.lineTo(pa.x-third, pb.y);	
				ctx.quadraticCurveTo(pa.x, pb.y,pa.x,pa.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var control = new BABYLON.Vector3(pa.x, 0, -pb.y);
				var destination = new BABYLON.Vector3(pa.x-third, 0, -pb.y);
				var linePoints = [origin.add(offset), destination.add(offset)];
				origin = destination;
				destination = new BABYLON.Vector3(pa.x, 0, -pa.y);				
				var detail = 32;
				linePoints = linePoints.concat((BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints());	
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}}
		}
	},
	{//26
		ports: {
		'NW' : {target :'ES', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				var _to = third*0.5;
				ctx.quadraticCurveTo(pa.x,_to, pa.x+_to, pa.y+third);
				ctx.lineTo(size-third,pb.y-_to);
				ctx.quadraticCurveTo(size-_to, pb.y , pb.x, pb.y);				
				ctx.stroke();	
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var _to = third*0.5;				
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pa.x, 0, -_to);
				var destination = new BABYLON.Vector3(pa.x+_to, 0, -pa.y-third);
				var detail = 16;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				
				origin = new BABYLON.Vector3(size-third, 0, -pb.y+_to);
				control = new BABYLON.Vector3(size-_to, 0, -pb.y);
				destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var lp2 = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints()
				lp2 = lp2.splice(1, lp2.length);				
				linePoints = linePoints.concat(lp2);
				//console.log(linePoints);*/				
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'NE' : {target :'WS', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				var _to = third*0.5;
				ctx.quadraticCurveTo(pa.x,_to, pa.x-_to, pa.y+third);
				ctx.lineTo(third,pb.y-_to);
				ctx.quadraticCurveTo(_to, pb.y , pb.x, pb.y);				
				ctx.stroke();		
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var _to = third*0.5;				
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pa.x, 0, -_to);
				var destination = new BABYLON.Vector3(pa.x-_to, 0, -pa.y-third);
				var detail = 16;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				
				origin = new BABYLON.Vector3(third, 0, -pb.y+_to);
				control = new BABYLON.Vector3(_to, 0, -pb.y);
				destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var lp2 = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints()
				lp2 = lp2.splice(1, lp2.length);				
				linePoints = linePoints.concat(lp2);
				//console.log(linePoints);*/				
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'EN' : {target :'SW', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				var _to = third*0.5;
				ctx.quadraticCurveTo(size-_to, pa.y, size-third, pa.y+_to);
				ctx.lineTo(pb.x+_to, pb.y-third);
				ctx.quadraticCurveTo(pb.x, pb.y-_to, pb.x, pb.y);				
				ctx.stroke();				
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var _to = third*0.5;				
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(size-_to, 0, -pa.y);
				var destination = new BABYLON.Vector3(size-third, 0, -pa.y-_to);
				var detail = 16;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				
				origin = new BABYLON.Vector3(pb.x+_to, 0, -pb.y+third);
				control = new BABYLON.Vector3(pb.x, 0, -pb.y+_to);
				destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var lp2 = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints()
				lp2 = lp2.splice(1, lp2.length);				
				linePoints = linePoints.concat(lp2);
				//console.log(linePoints);*/				
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'SE' : {target :'WN', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				var _to = third*0.5;
				ctx.quadraticCurveTo(pa.x,size-_to,pa.x-_to,pa.y-third);
				ctx.lineTo(third,pb.y+_to);
				ctx.quadraticCurveTo(_to, pb.y , pb.x, pb.y);				
				ctx.stroke();	
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var _to = third*0.5;				
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pa.x, 0, -size+_to);
				var destination = new BABYLON.Vector3(pa.x-_to, 0, -pa.y+third);
				var detail = 16;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				
				origin = new BABYLON.Vector3(third, 0, -pb.y-_to);
				control = new BABYLON.Vector3(_to, 0, -pb.y);
				destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var lp2 = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints()
				lp2 = lp2.splice(1, lp2.length);				
				linePoints = linePoints.concat(lp2);
				//console.log(linePoints);*/				
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},	
		},
	},
	{//27
		ports: {
		'NW' : {target :'NE', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.arc(size*0.5,0, (pb.x-pa.x)*0.5, 0, 1*Math.PI);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var detail = 32;
				var pieDiv = 2/detail;
				var divArray = [];
				var radius = (pb.x-pa.x)*0.5;
				var offset =  new BABYLON.Vector3(0, 0, size*0.5);
				for(var i = 0; i < detail; i++){
					divArray.push(Math.PI*(pieDiv*i));
				}
				var lineMesh= [];
				for(var i = 0; i <= 16; i++){
					lineMesh.push(new BABYLON.Vector3(
					(radius * Math.cos(divArray[i])), 0, (radius * Math.sin(divArray[i]))));
				}	

				var lineMesh = BABYLON.Mesh.CreateLines("lines", lineMesh, scene);
				lineMesh.rotation.y = Math.PI;
				lineMesh.bakeCurrentTransformIntoVertices();
				lineMesh.position.addInPlace(offset);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'EN' : {target :'SE', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(pb.x,pa.y,pb.x,pa.y+third);
				ctx.lineTo(pb.x,pb.y);				
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pb.x, 0, -pa.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pa.y-third);
							
				var detail = 31;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();	
				
				destination = new BABYLON.Vector3(pb.x, 0, -pb.y);	
				
				linePoints.push(destination.add(offset));
				
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'ES' : {target :'WN', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pb.x,pb.y);
				ctx.quadraticCurveTo(size*0.35, pb.y, size*0.5, size*0.5); 
				ctx.quadraticCurveTo(size*0.65, pa.y,pa.x,pa.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var _to = third*0.5;				
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var control = new BABYLON.Vector3(size*0.35, 0, -pb.y);
				var destination = new BABYLON.Vector3(size*0.5, 0, -size*0.5);
				var detail = 16;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				
				origin = destination;
				control = new BABYLON.Vector3(size*0.65, 0, -pa.y);
				destination = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var lp2 = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints()
				lp2 = lp2.splice(1, lp2.length);				
				linePoints = linePoints.concat(lp2);
				//console.log(linePoints);*/				
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'SW' : {target :'WS', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(pa.x,pb.y,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pa.x, 0, -pb.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}}
		}
	},
	{//28
		ports: {
		'NW' : {target :'SE', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.bezierCurveTo(pa.x,size*0.65,pb.x,size*0.35,pb.x,pb.y);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control1 = new BABYLON.Vector3(pa.x, 0, -size*0.65);
				var control2 = new BABYLON.Vector3(pb.x, 0, -size*0.35);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 16;
				var linePoints = (BABYLON.Curve3.CreateCubicBezier
					(
						origin.add(offset),
						control1.add(offset),
						control2.add(offset),
						destination.add(offset),
						detail
					)
				).getPoints();
										
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'NE' : {target :'WN', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pb.x,pb.y);
				ctx.lineTo(pa.x-third,pb.y);	
				ctx.quadraticCurveTo(pa.x,pb.y,pa.x,pa.y); 
				ctx.stroke();	
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var control = new BABYLON.Vector3(pa.x, 0, -pb.y);
				var destination = new BABYLON.Vector3(pa.x-third, 0, -pb.y);
				var linePoints = [origin.add(offset), destination.add(offset)];
				origin = destination;
				destination = new BABYLON.Vector3(pa.x, 0, -pa.y);				
				var detail = 32;
				linePoints = linePoints.concat((BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints());	
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'EN' : {target :'WS', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.bezierCurveTo(size*0.35, pa.y, size*0.65, pb.y , pb.x, pb.y);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control1 = new BABYLON.Vector3(size*0.35, 0, -pa.y);
				var control2 = new BABYLON.Vector3(size*0.65, 0, -pb.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 16;
				var linePoints = (BABYLON.Curve3.CreateCubicBezier
					(
						origin.add(offset),
						control1.add(offset),
						control2.add(offset),
						destination.add(offset),
						detail
					)
				).getPoints();
										
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'ES' : {target :'SW', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(pb.x,size*0.65,pb.x,pb.y); 
				ctx.stroke();				
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pb.x, 0, -size*0.65);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}}
		}
	},
	{//29
		ports: {
		'NW' : {target :'SE', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.bezierCurveTo(pa.x,size*0.65,pb.x,size*0.35,pb.x,pb.y);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control1 = new BABYLON.Vector3(pa.x, 0, -size*0.65);
				var control2 = new BABYLON.Vector3(pb.x, 0, -size*0.35);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 16;
				var linePoints = (BABYLON.Curve3.CreateCubicBezier
					(
						origin.add(offset),
						control1.add(offset),
						control2.add(offset),
						destination.add(offset),
						detail
					)
				).getPoints();
										
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'NE' : {target :'WS', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(pa.x,size*0.65,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pa.x, 0, -size*0.65);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'EN' : {target :'WN', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.lineTo(pb.x,pb.y);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				//Straight
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var linePoints = [origin.add(offset), destination.add(offset)];
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'ES' : {target :'SW', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(pb.x,size*0.65,pb.x,pb.y); 
				ctx.stroke();				
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pb.x, 0, -size*0.65);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}}
		}
	},
	{//30
		ports: {
		'NW' : {target :'SW', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.lineTo(pb.x,pb.y);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				//Straight
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var linePoints = [origin.add(offset), destination.add(offset)];
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'NE' : {target :'WN', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pb.x,pb.y);
				ctx.lineTo(pa.x-third,pb.y);	
				ctx.quadraticCurveTo(pa.x,pb.y,pa.x,pa.y); 
				ctx.stroke();	
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var control = new BABYLON.Vector3(pa.x, 0, -pb.y);
				var destination = new BABYLON.Vector3(pa.x-third, 0, -pb.y);
				var linePoints = [origin.add(offset), destination.add(offset)];
				origin = destination;
				destination = new BABYLON.Vector3(pa.x, 0, -pa.y);				
				var detail = 32;
				linePoints = linePoints.concat((BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints());	
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'EN' : {target :'WS', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.bezierCurveTo(size*0.35, pa.y, size*0.65, pb.y , pb.x, pb.y);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control1 = new BABYLON.Vector3(size*0.35, 0, -pa.y);
				var control2 = new BABYLON.Vector3(size*0.65, 0, -pb.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 16;
				var linePoints = (BABYLON.Curve3.CreateCubicBezier
					(
						origin.add(offset),
						control1.add(offset),
						control2.add(offset),
						destination.add(offset),
						detail
					)
				).getPoints();
										
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'ES' : {target :'SE', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(pb.x,pa.y,pb.x,pb.y); 
				ctx.stroke();				
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pb.x, 0, -pa.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}}
		}
	},
	{//31
		ports: {
		'NW' : {target :'EN', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(pa.x,size*0.35,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pa.x, 0, -size*0.35);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'NE' : {target :'WN', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(pa.x,size*0.35,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pa.x, 0, -size*0.35);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'ES' : {target :'SW', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(pb.x,size*0.65,pb.x,pb.y); 
				ctx.stroke();				
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pb.x, 0, -size*0.65);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'SE' : {target :'WS', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(pa.x,size*0.65,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pa.x, 0, -size*0.65);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}}	
		}
	},
	{//32
		ports: {
		'NW' : {target :'WN', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(pa.x,pb.y,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pa.x, 0, -pb.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'NE' : {target :'EN', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(pa.x,pb.y,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pa.x, 0, -pb.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'ES' : {target :'SE', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(pb.x, pa.y,pb.x,pb.y); 
				ctx.stroke();				
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pb.x, 0, -pa.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'SW' : {target :'WS', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(pa.x,pb.y,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pa.x, 0, -pb.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}}	
		}
	},
	{//33
		ports: {
		'NW' : {target :'WN', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(pa.x,pb.y,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pa.x, 0, -pb.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var detail = 32;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'NE' : {target :'ES', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x, pa.y);
				ctx.lineTo(pa.x,pb.y-third);	
				ctx.quadraticCurveTo(pa.x,pb.y,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pa.x, 0, -pb.y);
				var destination = new BABYLON.Vector3(pa.x, 0, -pb.y+third);
				var linePoints = [origin.add(offset), destination.add(offset)];
				origin = destination;
				destination = new BABYLON.Vector3(pb.x, 0, -pb.y);				
				var detail = 32;
				linePoints = linePoints.concat((BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints());	
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'EN' : {target :'WS', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.quadraticCurveTo(size*0.65, pa.y, size*0.5, size*0.5); 
				ctx.quadraticCurveTo(size*0.35, pb.y,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var _to = third*0.5;				
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(size*0.65, 0, -pa.y);
				var destination = new BABYLON.Vector3(size*0.5, 0, -size*0.5);
				var detail = 16;
				var linePoints = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints();
				
				origin = destination;
				control = new BABYLON.Vector3(size*0.35, 0, -pb.y);
				destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var lp2 = (BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints()
				lp2 = lp2.splice(1, lp2.length);				
				linePoints = linePoints.concat(lp2);
				//console.log(linePoints);*/				
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'SE' : {target :'SW', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.arc(size*0.5,size, (pa.x-pb.x)*0.5, Math.PI, 0*Math.PI);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var detail = 32;
				var pieDiv = 2/detail;
				var divArray = [];
				var radius = (pb.x-pa.x)*0.5;
				var offset =  new BABYLON.Vector3(0, 0, -size*0.5);
				for(var i = 0; i < detail; i++){
					divArray.push(Math.PI*(pieDiv*i));
				}
				var lineMesh= [];
				for(var i = 0; i <= 16; i++){
					lineMesh.push(new BABYLON.Vector3(
					(radius * Math.cos(divArray[i])), 0, (radius * Math.sin(divArray[i]))));
				}	

				var lineMesh = BABYLON.Mesh.CreateLines("lines", lineMesh, scene);
				lineMesh.rotation.y = Math.PI;
				lineMesh.bakeCurrentTransformIntoVertices();
				lineMesh.position.addInPlace(offset);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);		
		}}
		}
	},
	{//34
		ports: {
		'NW' : {target :'SW', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.lineTo(pb.x,pb.y);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				//Straight
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var linePoints = [origin.add(offset), destination.add(offset)];
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'NE' : {target :'SE', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.lineTo(pb.x,pb.y);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				//Straight
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var linePoints = [origin.add(offset), destination.add(offset)];
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'EN' : {target :'WN', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.lineTo(pb.x,pb.y);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				//Straight
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var linePoints = [origin.add(offset), destination.add(offset)];
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'ES' : {target :'WS', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.lineTo(pb.x,pb.y);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				//Straight
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var linePoints = [origin.add(offset), destination.add(offset)];
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}}
		}
	},
	{//35
		ports: {
		'NW' : {target :'NE', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.arc(size*0.5,0, (pb.x-pa.x)*0.5, 0, 1*Math.PI);
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var detail = 32;
				var pieDiv = 2/detail;
				var divArray = [];
				var radius = (pb.x-pa.x)*0.5;
				var offset =  new BABYLON.Vector3(0, 0, size*0.5);
				for(var i = 0; i < detail; i++){
					divArray.push(Math.PI*(pieDiv*i));
				}
				var lineMesh= [];
				for(var i = 0; i <= 16; i++){
					lineMesh.push(new BABYLON.Vector3(
					(radius * Math.cos(divArray[i])), 0, (radius * Math.sin(divArray[i]))));
				}	

				var lineMesh = BABYLON.Mesh.CreateLines("lines", lineMesh, scene);
				lineMesh.rotation.y = Math.PI;
				lineMesh.bakeCurrentTransformIntoVertices();
				lineMesh.position.addInPlace(offset);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'EN' : {target :'SE', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pb.x,pb.y);
				ctx.lineTo(pb.x, pa.y+third);	
				ctx.quadraticCurveTo(pb.x, pa.y,pa.x,pa.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var control = new BABYLON.Vector3(pb.x, 0, -pa.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pa.y-third);
				var linePoints = [origin.add(offset), destination.add(offset)];
				origin = destination;
				destination = new BABYLON.Vector3(pa.x, 0, -pa.y);				
				var detail = 32;
				linePoints = linePoints.concat((BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints());	
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'ES' : {target :'WS', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x, pa.y);
				ctx.lineTo(pb.x,pb.y);	
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				//Straight
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var destination = new BABYLON.Vector3(pb.x, 0, -pb.y);
				var linePoints = [origin.add(offset), destination.add(offset)];
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}},
		'SW' : {target :'WN', draw : (ctx, self, pa, pb, size, third)=>{
				ctx.beginPath();
				ctx.moveTo(pa.x,pa.y);
				ctx.lineTo(pa.x, pb.y+third);	
				ctx.quadraticCurveTo(pa.x, pb.y,pb.x,pb.y); 
				ctx.stroke();
		},
		lines : (scene, self, pa, pb, size, third)=>{
				var offset = new BABYLON.Vector3(-0.5, 0, 0.5);
				var origin = new BABYLON.Vector3(pa.x, 0, -pa.y);
				var control = new BABYLON.Vector3(pa.x, 0, -pb.y);
				var destination = new BABYLON.Vector3(pa.x, 0, -pb.y-third);
				var linePoints = [origin.add(offset), destination.add(offset)];
				origin = destination;
				destination = new BABYLON.Vector3(pb.x, 0, -pb.y);				
				var detail = 32;
				linePoints = linePoints.concat((BABYLON.Curve3.CreateQuadraticBezier(origin.add(offset), control.add(offset), destination.add(offset), detail)).getPoints());	
				var lineMesh = BABYLON.Mesh.CreateLines("line", linePoints, scene);
				//lineMesh.position.y = 0.01;
				//lineMesh.color = BABYLON.Color3.Red();
				self.paths.push(lineMesh);
		}}
		}
	}
];






document.addEventListener("DOMContentLoaded", () => {
	tso = new TSO(document.getElementById('renderCanvas'));
	

		for(var i=0; i<tso.deck.length; i++){
			tso.deck[i].mesh.position.x = i;
			tso.deck[i].mesh.position.y = 0.2;
		}

	
},false);

</script>


</html>